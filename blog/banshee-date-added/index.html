<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" href="../../css/base.css" type="text/css">
		<link rel="stylesheet" href="../../css/blog.css" type="text/css">
		<link rel="stylesheet" href="../../highlight/styles/default.css">
		<link rel="stylesheet" href="../../highlight/styles/monokai.css">
		<script src="../../highlight/highlight.pack.js"></script>
		<script>
function highlight() { // highlight all code blocks using HighlightJS
	var code_blocks = document.getElementsByTagName("code");
	for (var i = 0; i < code_blocks.length; i++)
		hljs.highlightBlock(code_blocks[i]);
}
		</script>
		<title>Blog - Update Banshee's Date Added Field | Anthony Zhang</title>
	</head>
	<body onload="highlight()">
		<h1>Hi, I'm <a href="/">Anthony Zhang</a>.</h1>
		<ul class="site_links">
			<li><a href="/blog/" class="page">blog</a></li>
			<span class="divider"></span>
			<li><a href="http://uberi.github.io/University-Notes" class="page">notes</a></li>
			<span class="divider"></span>
			<li><a href="/Résumé.pdf" class="page">résumé</a></li>
			<span class="divider"></span>
			<li><a href="https://github.com/Uberi" class="contact">github</a></li>
			<span class="divider"></span>
			<li><a href="http://www.linkedin.com/pub/anthony-zhang/8b/aa5/7aa" class="contact">linkedin</a></li>
			<span class="divider"></span>
			<li><a href="mailto:azhang9@gmail.com" class="contact">email</a></li>
			<span class="divider"></span>
			<li><a href="https://www.facebook.com/anthony.zhang.user" class="contact">facebook</a></li>
			<span class="divider"></span>
			<li><a href="http://uberi.mesecons.net/">mesecons</a></li>
			<span class="divider"></span>
			<li><a href="http://www.autohotkey.net/~Uberi/">autohotkey.net</a></li>
		</ul>
		<div class="post">
			<h2>Update Banshee's Date Added Field</h2>
			<p class="time">August 10, 2014</p>
			<p>If you use <a href="http://banshee.fm/">Banshee</a> as a music player, you've probably noticed that the "Date Added" column isn't very useful. Instead of showing the file creation or last modified time, it actually uses the time the files were added to the library.</p>
			<p>There's no built-in way to make it sort by modification time. To make this work, we'll have to mess around with the media database.</p>
			<p>Here's a quick Python script that accomplishes the task:</p>
			<pre><code class="python">#!/usr/bin/env python

DB_PATH = "~/.config/banshee-1/banshee.db"

import sqlite3
import os.path as path
conn = sqlite3.connect(path.expanduser(DB_PATH))
c = conn.cursor()
c.execute("""UPDATE CoreTracks SET
	DateAddedStamp = FileModifiedStamp,
	DateUpdatedStamp = FileModifiedStamp""")
conn.commit()
c.close()</code></pre>
			<p>You can also <a href="banshee-update-date-added.py">download the script directly</a>.</p>
			<p>This was written for Python 2.7, but should also work for any modern-ish version you have available. Simply run the script once to update the Date Added and Date Modified columns in your Banshee tracks list to the actual file modified time:</p>
			<img src="screenshot.png" alt="Screenshot" class="figure">
			<p>To do this regularly, you might want to set up a cronjob or have it done on startup. To have the script run once a day, simply run <code class="bash">crontab -e</code> and add <code class="no-highlight">0 0 */1 * * /PATH_TO_PYTHON_SCRIPT/banshee-update-date-added.py</code>. If you do this, make sure that the script is executable first using <code class="bash">chmod +x /PATH_TO_PYTHON_SCRIPT/banshee-update-date-added.py</code>.</p>
			<p>Oh, and one last thing. If you like keeping your ID3 tags updated in MP3 files, simply enable "Edit > Preferences > Sync metadata between library and files" to apply edits to tracks in Banshee to the actual files.</p>
			<p>Edit (August 19, 2014): To do the opposite, updating the file modified timestamp to match Banshee's date added timestamp, here's <a href="banshee-update-file-modified.py">another Python script to accomplish that</a>. This one's written for Python 3, however.</p>
			<div class="closing">Questions or comments? Drop me a line at <a href="mailto:azhang9@gmail.com?subject=Blog:%20Lecture%20Notes">azhang9@gmail.com</a>.</div>
		</div>
		<div class="license">
			<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> This work by <a xmlns:cc="http://creativecommons.org/ns#" href="https://uberi.github.io/" property="cc:attributionName" rel="cc:attributionURL">Anthony Zhang</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
			Copyright 2013-2015 Anthony Zhang.
		</div>
	</body>
</html>
